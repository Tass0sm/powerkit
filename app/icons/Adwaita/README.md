Stripped-down version for use with powerkit.
